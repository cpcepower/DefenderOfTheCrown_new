;	IFNDEF DEFINE_LINK;	DEFINE_LINK equ 1;;LINK.ASM;;; Macros;	MACRO TXT_LOCATE X,Y    ; &BB5A - ASC 31-&1f Locate the text cursor	ld hl,X*&100+Y	call TXT_SET_CURSOR	ENDM	MACRO TXT_SET_COLUMN	; &BB6F	dec a	ld (&b726+1),a	ENDM;;Declaration de la bibliotheque;	IFNDEF MAIN_JUMP	read "constant.asm"	MACRO M_LINKF function, adr	function equ adr+3	ENDM	MACRO M_LINKFEND function, adr, asm_func_end	M_LINKF function, adr	asm_func_end equ adr+3	ENDM	ELSE	MACRO M_LINKF function, adr	jp function	ENDM	MACRO M_LINKFEND function, adr, asm_func_end	jp function	ENDM	ENDIF;; Firmware;TXT_OUTPUT		equ #BB5ATXT_GET_CURSOR		equ #BB78;TXT_SET_COLUMN		equ #BB6FTXT_SET_CURSOR		equ _lbb75SCR_CHAR_POSITION	equ _lbc1a;;BIBLI.ASM;	M_LINKF AIGUILLE, START		;A-No ss-prog,HL-Adresse table	M_LINKF RND, AIGUILLE		;A-Val max -> A-Valeur (0<A<Val max+1)	M_LINKF GETVAR, RND		;IX-Table des variables -> HL-Variable	M_LINKF RDTAB16, GETVAR		;HL-Table,A-Indice -> HL-Adresse	M_LINKF RDTAB, RDTAB16		;HL-Table,DE-Taille valeurs,A-Indice -> HL-Adresse	M_LINKF GETSTR, RDTAB		;HL-Table,A-Indice -> HL-Chaine	M_LINKF GETJOY, GETSTR		; -> A-Etat joystick	M_LINKF WAIT_PAUSE, GETJOY	;A-Duree en s. -> NZ=Hit key	M_LINKF REPONOFF, WAIT_PAUSE	M_LINKF DIMINUE, REPONOFF	;HL-Valeur,B-Pourcentage -> HL-Valeur	M_LINKF MULT, DIMINUE	M_LINKFEND DIV, MULT, BIBLI_FEND;;DISC.ASM;	M_LINKFEND READFILE, BIBLI_FEND,DISC_FEND	;HL-Nom fichier,DE-Adresse dimplantation						; -> BC-Longueur,DE-Adresse octet suivant;;FLECHE.ASM;	M_LINKF AFLECHE, DISC_FEND	M_LINKF EFLECHE, AFLECHE	M_LINKF GFLECH1, EFLECHE		; -> HL-Coordonnees de la fleche	M_LINKF GFLECH2, GFLECH1		; -> HL-Adresse ecran de la fleche	M_LINKF TFLECHE, GFLECH2		; -> A-Octet ecran pointe par la fleche	M_LINKFEND MFLECHE, TFLECHE, FLECHE_FEND	;C=Init speed -> A-Etat joystick;;MUSINT.ASM;	M_LINKF BRUIT, FLECHE_FEND		;A -Numero du bruit	M_LINKF LOADMUS, BRUIT			;HL-Nom fichier musique	M_LINKF ONOFF, LOADMUS	M_LINKF OFF, ONOFF	M_LINKFEND ON, OFF, MUSINT_FEND		;HL-Adresse musique;;SCR.ASM;	M_LINKF load_decomp_scr, MUSINT_FEND	;HL-Nom de l'ecran	M_LINKF SETPAL, load_decomp_scr		;HL-Palette	M_LINKF BLACKOUT, SETPAL	M_LINKF DECOMP, BLACKOUT	;HL-Adresse image compactee	M_LINKFEND SETFLASH, DECOMP, SCR_FEND;;SPRITE.ASM;	M_LINKF LUTINIT, SCR_FEND	M_LINKF LUTIN, LUTINIT		;A-No sprite,HL-Coordonnees -> A-No lutin	M_LINKF LUTON, LUTIN		;A-No lutin	M_LINKF LUTOFF, LUTON		;A-No lutin	M_LINKF LUTSAVE, LUTOFF		;A-No lutin	M_LINKF LUTMODV, LUTSAVE	;A-No lutin,HL-Coordonnees,B-No sprite	M_LINKF AFFSPR, LUTMODV		;A-No sprite,HL-Coordonnees	M_LINKF PUTSPR, AFFSPR		;HL-Adresse ecran,DE-Sprite,B-Largeur,C-hauteur	M_LINKF GETSPR, PUTSPR		;HL-Table sprites,A-No sprite					; -> HL-Sprite,B-Largeur,C-Hauteur	M_LINKF WHATREG, GETSPR		; -> C=Trouve,A-No region	M_LINKF SCRADD, WHATREG	M_LINKF NEXTLINE, SCRADD	M_LINKF AFFSPRB, NEXTLINE	M_LINKF AFFSPRC, AFFSPRB	M_LINKF ANIMATE, AFFSPRC	M_LINKF MILPAUSE, ANIMATE	M_LINKF ANIMATEB, MILPAUSE	M_LINKF GETLUT, ANIMATEB	M_LINKF LUTMSCR, GETLUT	M_LINKFEND AFFREG, LUTMSCR, SPRITE_FEND;;TXT.ASM;	M_LINKF _lbb75, SPRITE_FEND	M_LINKF _lbc1a, _lbb75	M_LINKF MENUTEXT , _lbc1a		;HL-Texte -> A-Option,HL-Octet apres texte	M_LINKF MENUSEL , MENUTEXT		; -> A-option	M_LINKF MENUTEX0 , MENUSEL	M_LINKF MENUREST , MENUTEX0	M_LINKFEND MENUTEX1 , MENUREST, TXT_FEND;;DIVERS.ASM;	M_LINKF KILL     , TXT_FEND	M_LINKF GETREG   , KILL	M_LINKF GETLORD  , GETREG	M_LINKF LGETHOME , GETLORD	M_LINKF LGETYPE  , LGETHOME	M_LINKF LGETREG  , LGETYPE	M_LINKF LGETSOLD , LGETREG	M_LINKF LPUTSOLD , LGETSOLD	M_LINKF LGETCHEV , LPUTSOLD	M_LINKF LPUTCHEV , LGETCHEV	M_LINKF LGETCATA , LPUTCHEV	M_LINKF LPUTCATA , LGETCATA	M_LINKF LGETGOLD , LPUTCATA	M_LINKF LPUTGOLD , LGETGOLD	M_LINKF LGETWIFE , LPUTGOLD	M_LINKF RGETSOLD , LGETWIFE	M_LINKF RPUTSOLD , RGETSOLD	M_LINKF RGETCHEV , RPUTSOLD	M_LINKF RPUTCHEV , RGETCHEV	M_LINKF RGETCATA , RPUTCHEV	M_LINKF RPUTCATA , RGETCATA	M_LINKF RGETPROP , RPUTCATA	M_LINKF RGETBUIL , RGETPROP	M_LINKF LGETINC  , RGETBUIL	M_LINKF LGETARM  , LGETINC	M_LINKF ENCAISSE , LGETARM	M_LINKF PAYE     , ENCAISSE	M_LINKF TST_MONY , PAYE	M_LINKF PAYE_PC  , TST_MONY	M_LINKF RETIRE   , PAYE_PC	M_LINKF GO       , RETIRE	M_LINKF KADO     , GO	M_LINKF ISDEAD   , KADO	M_LINKF ISNORM   , ISDEAD	M_LINKF ISJOUEUR , ISNORM	M_LINKF LANDFREE , ISJOUEUR	M_LINKF GETLNAME , LANDFREE	M_LINKF GETRNAME , GETLNAME	M_LINKF PLACARD  , GETRNAME	M_LINKF AFFMAP   , PLACARD	M_LINKF CHOIXREG , AFFMAP	M_LINKF CHEMIN   , CHOIXREG	M_LINKF DEPLACE  , CHEMIN	M_LINKFEND CHOOSE, DEPLACE, DIVERS_FEND;; SQUELET.ASM;	M_LINKFEND EXECARTE , DIVERS_FEND, SQUELET_FEND;;ATTAK.ASM;	M_LINKF ATTAQUE , SQUELET_FEND	M_LINKF LORDHERE, ATTAQUE	M_LINKF LORDNEAR, LORDHERE	M_LINKF RAMENE  , LORDNEAR	M_LINKF TRANSFER, RAMENE	M_LINKF RAPATRIE, TRANSFER	M_LINKF AFFARM  , RAPATRIE	M_LINKF AFFINC  , AFFARM	M_LINKF AFFLAND , AFFINC	M_LINKFEND LGETPREF, AFFLAND, ATTAK_FEND	IFNDEF MAIN_JUMP;;DATADAT EQU ATTAK_FEND+3RETSIEGE EQU  DATANIBUF   EQU  DAT+2LORD     EQU  DAT+4LUTTAB   EQU  DAT+6	ENDIF;	ENDIF	nolist