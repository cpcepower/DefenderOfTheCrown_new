;;ENCODE;Renvoie dans A le code d'un octet ecran de la couleur dans A;ENCODE         PUSH BC         LD   C,A         XOR  A         BIT  3,C         JR   Z,ENCOD0         OR   #03ENCOD0   BIT  2,C         JR   Z,ENCOD1         OR   #30ENCOD1   BIT  1,C         JR   Z,ENCOD2         OR   #0CENCOD2   BIT  0,C         JR   Z,ENCOD3         OR   #C0ENCOD3   POP  BC         RET;_lbb75			; TXT SET CURSOR;	ld a,(&b729);	dec a;	add a,l;	ld l,a;	ld a,(&b72A);	dec a;	add a,h;	ld h,a	dec l	dec h	ld (&b726),hl	ret;_lbb5a	; TXT OUTPUT;;	push af;	push bc;	push de;	push hl;;	ld hl,(&b726)	; cursor xy position;	inc h;	ld (&b726),hl;	call WR_CHAR;	pop hl;	pop de;	pop bc;	pop af;	ret;;WR_CHAR;Remplace l'indirection TXT WRITE CHAR.(#BDD3);Permet d'utiliser TXT OUTPUT malgre la police reduite;A contient le caractere a ecrire;H contient la colonne;L contient la ligne;WR_CHAR         PUSH IX         SUB  " "         LD   IX,POLICE         LD   D,0         LD   E,A         ADD  IX,DE         ADD  IX,DE         ADD  IX,DE;;         LD   DE,#F333        ;D=PAPER  E=PEN	call SCR_CHAR_POSITION	ld bc,&7301	ld de,&f311WR_CHAR0 PUSH HL	ld (hl),d	inc hl	ld (hl),d	dec hl         LD   A,(IX+00)         AND  C         JR   Z,WR_CHAR1	ld (hl),bWR_CHAR1 LD   A,(IX+01)         AND  C         JR   Z,WR_CHAR2         LD   A,(hl)         AND  #AA         OR   E         LD   (hl),AWR_CHAR2 LD   A,(IX+02)         AND  C         JR   Z,WR_CHAR3	inc hl	ld (hl),bWR_CHAR3	pop hl	INLINE_BC26_HL         SLA  C         JR   NZ,WR_CHAR0         POP  IX         RET; 66_lbc1a	; scr char position; Action Gets the memory address of the top left corner of a specified character position; Entry H contains the character physical column and L contains the character physical row	push de;call #0b0c;ld a,(#b7c3)	; b7c3 - mode number;cp #01;ld b,#04;jr c,l0b77;ld b,#02;jr z,l0b77;dec b.l0b77;push bc	ld e,h	ld d,#00	ld h,d	push de	ld d,h	ld e,l	add hl,hl	add hl,hl	add hl,de	add hl,hl	add hl,hl	add hl,hl	add hl,hl	pop de;.l0b87	add hl,de	add hl,de       ; 2x -> b = 1 for mode 0;djnz l0b87	ld de,(#b7c4)	; b7c4 - screen offset	add hl,de	ld a,h	and #07	ld h,a	ld a,(#b7c6)	; b7c6 - screen base HB (LB taken as &00)	add h	ld h,a;pop bc	pop de	ret;;POLICE;POLICE    DEFB #00,#00,#00    ;    DEFB #00,#5E,#00    ;!    DEFB #06,#00,#06    ;";   DEFB #28,#6C,#28    ;#    DEFB #3A,#41,#3A    ;# = u circonflexe    DEFB #58,#D5,#34    ;$    DEFB #64,#10,#4C    ;%;   DEFB #34,#6A,#54    ;&    DEFB #66,#55,#7A    ;& = a circonflexe    DEFB #00,#06,#00    ;'    DEFB #3E,#41,#00    ;(    DEFB #41,#3E,#00    ;)    DEFB #54,#38,#54    ;*    DEFB #10,#7C,#10    ;+    DEFB #E0,#00,#00    ;,    DEFB #10,#10,#10    ;-    DEFB #60,#00,#00    ;.    DEFB #60,#18,#06    ;/    DEFB #3C,#42,#3C    ;0    DEFB #44,#7E,#40    ;1    DEFB #62,#52,#4C    ;2    DEFB #42,#4A,#34    ;3    DEFB #1E,#10,#7C    ;4    DEFB #4E,#4A,#32    ;5    DEFB #3C,#4A,#32    ;6    DEFB #02,#72,#0E    ;7    DEFB #34,#4A,#34    ;8    DEFB #4C,#52,#3C    ;9    DEFB #6C,#00,#00    ;:    DEFB #EC,#00,#00    ;;    DEFB #10,#28,#44    ;<    DEFB #28,#28,#28    ;=    DEFB #44,#28,#10    ;>    DEFB #04,#52,#0C    ;?;   DEFB #3C,#42,#5C    ;@    DEFB #04,#72,#04    ;@ = i circonflexe;    DEFB #7C,#12,#7C    ;A    DEFB #7E,#4A,#34    ;B    DEFB #3C,#42,#24    ;C    DEFB #7E,#42,#3C    ;D    DEFB #3C,#4A,#42    ;E    DEFB #7C,#0A,#02    ;F    DEFB #3C,#42,#74    ;G    DEFB #7E,#10,#7E    ;H    DEFB #42,#7E,#42    ;I    DEFB #22,#42,#3E    ;J    DEFB #7E,#08,#76    ;K    DEFB #7E,#40,#40    ;L    DEFB #7E,#04,#7E    ;M    DEFB #7E,#02,#7C    ;N    DEFB #3C,#42,#3C    ;O    DEFB #7E,#12,#0C    ;P    DEFB #3C,#62,#BC    ;Q    DEFB #7C,#12,#6C    ;R    DEFB #44,#5A,#22    ;S    DEFB #02,#7E,#02    ;T    DEFB #3E,#40,#3E    ;U    DEFB #1E,#60,#1E    ;V    DEFB #7E,#20,#7E    ;W    DEFB #66,#18,#66    ;X    DEFB #06,#78,#06    ;Y    DEFB #62,#5A,#46    ;Z;;   DEFB #7F,#41,#00    ;[;   DEFB #06,#18,#60    ;\;   DEFB #41,#7F,#00    ;];   DEFB #04,#7E,#04    ;^;   DEFB #40,#40,#40    ;_;   DEFB #02,#04,#00    ;`    DEFB #3A,#55,#59    ;e aigu    DEFB #3A,#55,#5A    ;e circonflexe    DEFB #39,#55,#5A    ;e grave    DEFB #65,#55,#7A    ;a grave    DEFB #3D,#41,#3A    ;u grave    DEFB #3A,#45,#3A    ;o circonflexe;    DEFB #64,#54,#78    ;a    DEFB #3E,#44,#38    ;b    DEFB #38,#44,#44    ;c    DEFB #38,#44,#3E    ;d    DEFB #38,#54,#58    ;e    DEFB #08,#7C,#0A    ;f    DEFB #98,#A4,#78    ;g    DEFB #7E,#08,#70    ;h    DEFB #00,#74,#00    ;i    DEFB #80,#7A,#00    ;j    DEFB #7E,#18,#64    ;k    DEFB #00,#3E,#40    ;l    DEFB #7C,#04,#7C    ;m    DEFB #7C,#04,#78    ;n    DEFB #38,#44,#38    ;o    DEFB #F8,#44,#38    ;p    DEFB #38,#44,#F8    ;q    DEFB #78,#04,#04    ;r    DEFB #48,#54,#24    ;s    DEFB #04,#3E,#44    ;t    DEFB #3C,#40,#3C    ;u    DEFB #1C,#60,#1C    ;v    DEFB #7C,#20,#7C    ;w    DEFB #6C,#10,#6C    ;x    DEFB #8C,#90,#7C    ;y    DEFB #64,#54,#4C    ;z;